<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Picker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- Main Date Picker Container -->
    <div class="relative w-full max-w-sm" id="date-picker-container">
        
        <!-- Input field with calendar icon -->
        <div class="relative flex items-center bg-white p-4 rounded-xl shadow-lg cursor-pointer" id="date-picker-input-wrapper">
            <input 
                type="text"
                id="selected-date-input"
                class="flex-1 text-lg font-medium outline-none cursor-pointer bg-transparent"
                placeholder="Select a date"
                readonly
            >
            <i class="fa-solid fa-calendar-days text-gray-500 text-2xl"></i>
        </div>

        <!-- Calendar Dropdown -->
        <div id="calendar-dropdown" class="hidden absolute z-10 mt-2 bg-white p-4 rounded-xl shadow-lg w-full">
            <!-- Calendar Header -->
            <div class="flex items-center justify-between text-white bg-blue-600 rounded-lg p-2 mb-2">
                <button id="prev-month" class="p-2 rounded-full hover:bg-blue-700 transition-colors duration-200">
                    <i class="fa-solid fa-chevron-left text-sm"></i>
                </button>
                <h2 id="current-month-year" class="text-lg font-semibold"></h2>
                <button id="next-month" class="p-2 rounded-full hover:bg-blue-700 transition-colors duration-200">
                    <i class="fa-solid fa-chevron-right text-sm"></i>
                </button>
            </div>

            <!-- Weekday Headers -->
            <div class="grid grid-cols-7 gap-1 text-center text-gray-500 text-sm mb-2">
                <div class="font-semibold">S</div>
                <div class="font-semibold">M</div>
                <div class="font-semibold">T</div>
                <div class="font-semibold">W</div>
                <div class="font-semibold">T</div>
                <div class="font-semibold">F</div>
                <div class="font-semibold">S</div>
            </div>

            <!-- Days Grid -->
            <div id="days-grid" class="grid grid-cols-7 gap-1 text-center">
                <!-- Days will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const dateInput = document.getElementById('selected-date-input');
            const calendarDropdown = document.getElementById('calendar-dropdown');
            const datePickerInputWrapper = document.getElementById('date-picker-input-wrapper');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');
            const currentMonthYear = document.getElementById('current-month-year');
            const daysGrid = document.getElementById('days-grid');
            
            let selectedDate = null;
            let currentDate = new Date();

            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

            // Format date to DD/MM/YYYY
            const formatDate = (date) => {
                if (!date) return '';
                const day = String(date.getDate()).padStart(2, '0');
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const year = date.getFullYear();
                return `${day}/${month}/${year}`;
            };

            // Render the calendar for the given month and year
            const renderCalendar = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth();
                const firstDayOfMonth = new Date(year, month, 1);
                const lastDayOfMonth = new Date(year, month + 1, 0);
                const firstDayOfWeek = firstDayOfMonth.getDay();
                
                currentMonthYear.textContent = `${monthNames[month]} ${year}`;
                daysGrid.innerHTML = ''; // Clear previous days

                // Add days from the previous month
                const prevMonthLastDay = new Date(year, month, 0).getDate();
                for (let i = firstDayOfWeek; i > 0; i--) {
                    const dayElement = document.createElement('div');
                    dayElement.textContent = prevMonthLastDay - i + 1;
                    dayElement.classList.add('p-2', 'rounded-full', 'text-gray-400', 'cursor-not-allowed');
                    daysGrid.appendChild(dayElement);
                }

                // Add days for the current month
                for (let i = 1; i <= lastDayOfMonth.getDate(); i++) {
                    const dayElement = document.createElement('div');
                    dayElement.textContent = i;
                    dayElement.classList.add('p-2', 'rounded-full', 'cursor-pointer', 'transition-colors', 'duration-200', 'text-gray-800', 'hover:bg-gray-200');
                    
                    const dayDate = new Date(year, month, i);

                    // Highlight the selected date
                    if (selectedDate && dayDate.toDateString() === selectedDate.toDateString()) {
                        dayElement.classList.remove('text-gray-800', 'hover:bg-gray-200');
                        dayElement.classList.add('bg-blue-600', 'text-white', 'font-bold', 'hover:bg-blue-700');
                    }
                    
                    dayElement.addEventListener('click', () => {
                        selectedDate = dayDate;
                        dateInput.value = formatDate(selectedDate);
                        calendarDropdown.classList.add('hidden');
                        renderCalendar(dayDate); // Re-render to highlight the new selected date
                    });
                    
                    daysGrid.appendChild(dayElement);
                }

                // Add days from the next month to fill the grid
                const totalDays = daysGrid.children.length;
                const remainingDays = 42 - totalDays;
                for (let i = 1; i <= remainingDays; i++) {
                    const dayElement = document.createElement('div');
                    dayElement.textContent = i;
                    dayElement.classList.add('p-2', 'rounded-full', 'text-gray-400', 'cursor-not-allowed');
                    daysGrid.appendChild(dayElement);
                }
            };

            // Event listener to toggle the calendar dropdown
            datePickerInputWrapper.addEventListener('click', () => {
                calendarDropdown.classList.toggle('hidden');
                // Ensure the calendar shows the month of the currently selected date if available
                if (selectedDate) {
                    currentDate = new Date(selectedDate);
                }
                renderCalendar(currentDate);
            });

            // Event listener for previous month button
            prevMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar(currentDate);
            });

            // Event listener for next month button
            nextMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar(currentDate);
            });

            // Close the calendar when clicking outside
            document.addEventListener('mousedown', (event) => {
                if (!datePickerInputWrapper.contains(event.target) && !calendarDropdown.contains(event.target)) {
                    calendarDropdown.classList.add('hidden');
                }
            });

            // Initial render
            renderCalendar(currentDate);
        });
    </script>
</body>
</html>
